<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Review</title>
    <link rel="icon" href="/images/logo.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.0/dist/sweetalert2.all.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/theme.min.css">
    <style>
        body {
            font-family: 'Source Sans 3', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        a {
            text-decoration: none;
            color: inherit;
        }
        /* Navbar */
     

        .cart-container {
            width: 90%;
            margin: 100px auto;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 2rem 2rem;
        }
        table {
            background-color: white;
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            text-align: left;
            padding: 1rem;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f5f5f5;
        }
        
        .cart-image {
            width: 50px;
            height: 50px;
            object-fit: cover;
        }
        .cart-totals {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin-top: 2rem;
            align-items: flex-start;
        }
        .cart-totals .totals-box {
            width: 100%;
            background: #f5f5f5;
            padding: 1.5rem;
            border-radius: 6px;
            margin-bottom: 1rem;
        }

        .totals-box {
            width: 100%;
            max-width: 400px;
            margin: auto;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .totals-box h3 {
            text-align: center;
            margin-bottom: 16px;
            font-size: 1.5rem;
            color: #333;
        }

        .totals-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 16px;
        }

        .quantity-input{
            height: 30px;
            width: 50px;
            justify-items: center;
        }

        .totals-table td {
            padding: 8px 12px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 1rem;
        }

        .totals-table td:first-child {
            text-align: left;
            font-weight: 500;
            color: #555;
        }

        .totals-table td:last-child {
            text-align: right;
            font-weight: 700;
            color: #000;
        }

        .totals-table tr:last-child td {
            border-bottom: none;
        }

        .checkout-btn {
            width: 100%;
            padding: 10px 16px;
            background-color: #28a745;
            color: #fff;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            text-transform: uppercase;
        }

        .checkout-btn:hover {
            background-color: #218838;
        }

        .invoice {
            position: relative;
            overflow: hidden;
            height: 3rem;
            padding: 0 2rem;
            border-radius: 1.5rem;
            background: #767676;
            background-size: 400%;
            color: #fff;
            border: none;
            cursor: pointer;
        }

        .invoice:hover::before {
            transform: scaleX(1);
        }

        .button-content {
            position: relative;
            z-index: 1;
        }

        .invoice::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            transform: scaleX(0);
            transform-origin: 0 50%;
            width: 100%;
            height: inherit;
            border-radius: inherit;
            background: linear-gradient(
                82.3deg,
                #5A8A27,
                #4d6930
            );
            transition: all 0.475s;
        }


        /* Footer */
        footer {
            background-color: #8CBF3A; /* Updated background color */
            color: white; /* Ensures text remains readable */
        }

        footer a {
            color: white; /* Ensures links in the footer are readable */
            text-decoration: none;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: #f0f0f0; /* Slightly lighter color on hover */
        }

        footer .input-group button {
            background-color: #6A9F2E; /* Matches footer tone */
            color: white;
            border: none;
        }
        

        footer .input-group button:hover {
            background-color: #5A8A27; /* Darker hover effect */
        }
        @media (min-width: 768px) {
            .cart-totals .totals-box{
                width: 100%;
                margin-bottom: 0;
            }

            footer .row {
                width: 100%;
                text-align: center;
            }
        }
        
    </style>
</head>
<body>
  <!-- Header Section -->
  <%-include('../partials/header')%>
  <main>
    <!-- section -->
     <!-- Bootstrap Modal for Return Reason -->
     <div class="modal fade" id="returnModal" tabindex="-1" aria-labelledby="returnModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="returnModalLabel">Reason for Returning the Order</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form id="returnForm">
                <div class="mb-3">
                  <label for="returnReason" class="form-label">Select a reason</label>
                  <select class="form-select" id="returnReason" required>
                    <option value="">Choose...</option>
                    <option value="expired">Expired Product</option>
                    <option value="damaged">Damaged or Spoiled Item</option>
                    <option value="wrong_item">Wrong Item Delivered</option>
                    <option value="missing_item">Missing Item</option>
                    <option value="quality_issue">Quality Not as Expected</option>
                    <option value="other">Other</option>
                  </select>
                  <div class="invalid-feedback">Please select a reason for return.</div>
                </div>
                <div class="mb-3">
                  <label for="additionalDetails" class="form-label">Additional Details (Optional)</label>
                  <textarea class="form-control" id="additionalDetails" rows="3" ></textarea>
                  <div class="invalid-feedback">Please provide additional details.</div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
              <button type="submit" class="btn btn-primary" form="returnForm" >Submit</button>
            </div>
          </div>
        </div>
      </div>
  
  <!-- Button to trigger the modal -->

  <!-- Bootstrap JS (Ensure Bootstrap 5 is included in your project) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
    <section>
        <div class="container">
            <!-- row -->
            <div class="grid grid-cols-12">
                <!-- col -->
                <div class="col-span-12">
                    <div class="flex justify-between items-center md:hidden py-4">
                        <!-- heading -->
                        <h3 class="text-md mb-0">Account Setting</h3>
                        <!-- button -->
                        <button
                            class="btn inline-flex items-center gap-x-2 bg-transparent text-gray-600 border-gray-300 disabled:opacity-50 disabled:pointer-events-none hover:text-white hover:bg-gray-700 hover:border-gray-700 active:bg-gray-700 active:border-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-300 md:hidden btn-sm ms-3"
                            type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasAccount"
                            aria-controls="offcanvasAccount">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round"
                                class="icon icon-tabler icons-tabler-outline icon-tabler-indent-increase">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path d="M20 6l-11 0" />
                                <path d="M20 12l-7 0" />
                                <path d="M20 18l-11 0" />
                                <path d="M4 8l4 4l-4 4" />
                            </svg>
                        </button>
                    </div>
                </div>
                <!-- col -->
                <div class="lg:col-span-2 md:col-span-4 col-span-12 border-r hidden md:block">
                    <div class="pt-10 md:pr-10">
                        <!-- nav -->
                        <ul class="nav flex-col nav-pills nav-pills-dark">
                            <!-- nav item -->
                            <li class="nav-item">
                                <a class="nav-link active gap-2" aria-current="page" href="/account/orders">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round"
                                        class="icon icon-tabler icons-tabler-outline icon-tabler-shopping-bag">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                        <path
                                            d="M6.331 8h11.339a2 2 0 0 1 1.977 2.304l-1.255 8.152a3 3 0 0 1 -2.966 2.544h-6.852a3 3 0 0 1 -2.965 -2.544l-1.255 -8.152a2 2 0 0 1 1.977 -2.304z" />
                                        <path d="M9 11v-5a3 3 0 0 1 6 0v5" />
                                    </svg>
                                    Your Orders
                                </a>
                            </li>
                            <!-- nav item -->
                            <li class="nav-item">
                                <a class="nav-link gap-2" href="/account/settings">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round"
                                        class="icon icon-tabler icons-tabler-outline icon-tabler-settings">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                        <path
                                            d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" />
                                        <path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" />
                                    </svg>
                                    Settings
                                </a>
                            </li>
                            <!-- nav item -->
                            <li class="nav-item">
                                <a class="nav-link gap-2" href="/account/address">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round"
                                        class="icon icon-tabler icons-tabler-outline icon-tabler-map-pin">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                        <path d="M9 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" />
                                        <path
                                            d="M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.827 0l-4.244 -4.243a8 8 0 1 1 11.314 0z" />
                                    </svg>
                                    Address
                                </a>
                            </li>
                            <!-- nav item -->
                            <li class="nav-item">
                                <a class="nav-link gap-2" href="account-payment-method.html">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round"
                                        class="icon icon-tabler icons-tabler-outline icon-tabler-credit-card-pay">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                        <path
                                            d="M12 19h-6a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v4.5" />
                                        <path d="M3 10h18" />
                                        <path d="M16 19h6" />
                                        <path d="M19 16l3 3l-3 3" />
                                        <path d="M7.005 15h.005" />
                                        <path d="M11 15h2" />
                                    </svg>
                                    Payment Method
                                </a>
                            </li>
                            <!-- nav item -->
                            <li class="nav-item">
                                <a class="nav-link gap-2" href="account-notification.html">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round"
                                        class="icon icon-tabler icons-tabler-outline icon-tabler-bell">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                        <path
                                            d="M10 5a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6" />
                                        <path d="M9 17v1a3 3 0 0 0 6 0v-1" />
                                    </svg>
                                    Notification
                                </a>
                            </li>
                            <!-- nav item -->
                            <li class="nav-item">
                                <hr class="pt-3 mt-5" />
                            </li>
                            <!-- nav item -->
                            <li class="nav-item">
                                <a class="nav-link gap-2" href="index.html">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round"
                                        class="icon icon-tabler icons-tabler-outline icon-tabler-logout">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                        <path
                                            d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2" />
                                        <path d="M9 12h12l-3 -3" />
                                        <path d="M18 15l3 -3" />
                                    </svg>
                                    Log out
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="lg:col-span-10 md:col-span-8 col-span-12" >
                    <div class="py-6 md:p-6 lg:p-10">
                        <div class="cart-container" style="margin-top: 0;">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h1>Order</h1>
                                    <a href="">
                                        <button class="invoice">
                                            <span class="button-content">Download Invoice</span>
                                        </button>
                                    </a>
                            </div>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Product</th>
                                        <th>Variety</th>
                                        <th>Quantity</th>
                                        <th>Variety Measurment</th>
                                        <th>Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% orders.forEach((order) => { 
                                        order.products.forEach((product=>{%>

                                        <tr>
                                            <td><%=product.name%></td>
                                            <td><%=product.variety%></td>
                                            <td>
                                              <div class="quantity">
                                                  <input type="number"value="<%=product.quantity%>" class="quantity-input" disabled>
                                              </div>
                                            </td>
                                            <td><%=product.varietyMeasurement%></td>
                                            <td>₹<%=product.price%></td>
                                          </tr>
                                        <%}))})%>
                                        
                                
                                </tbody>
                            </table>
                    
                            <div class="cart-totals row">
                                <div class=" col-lg-5" style="background: #f5f5f5;
                                padding: 1.5rem;
                                border-radius: 6px">
                                    <h3>Details</h3>
                                    <p style="font-weight: 500;">First Name: <span style="font-weight: bold;"><%=orders[0].shippingAddress.firstName%></span></p>
                                    <p style="font-weight: 500;">Second Name: <span style="font-weight: bold;"><%=orders[0].shippingAddress.lastName%></span></p>
                                    <p style="font-weight: 500;">Payment Method: <span style="font-weight: bold;"><%=orders[0].paymentDetails.method%></span></p>
                                    <p style="font-weight: 500;">Ordered Date: <span style="font-weight: bold;"><%=orders[0].orderDateAndTime%></span></p>
                                    <p style="font-weight: 500;">Status: <span style="font-weight: bold;"><%=orders[0].orderStatus%></span></p>
                                  
                                        <!-- <p style="font-weight: 500;">Return Reason: <span style="font-weight: bold;"></span></p>
                                   -->
                                </div>
                                <div class=" col-lg-6" style="background: #f5f5f5;
                                padding: 1.5rem;
                                border-radius: 6px">
                                    <h3>Address Details</h3>
                                    <p style="font-weight: 500;"><%=orders[0].shippingAddress.addressLine1%></p>
                                    <p style="font-weight: 500;"><%=orders[0].shippingAddress.addressLine2%></p>
                                    <p style="font-weight: 500;"><%=orders[0].shippingAddress.city%></p>
                                    <p style="font-weight: 500;"><%=orders[0].shippingAddress.zipCode%></p>
                                    <p style="font-weight: 500;"><%=orders[0].shippingAddress.state%></p>
                                    <p style="font-weight: 500;"><%=orders[0].shippingAddress.country%></p>

                                 
                                </div>
                                <div class=" col-lg-6 mt-3" style="background: #f5f5f5;
                                padding: 1.5rem;
                                border-radius: 6px">
                                    <h3>Cart Totals</h3>
                                    <table class="totals-table">
                                        <tr>
                                            <td>Sub Total:</td>
                                            <td id="sub-total">₹<%=orders[0].subTotal%>
                                        </tr>
                                        <tr>
                                            <td>Delivery:</td>
                                            <td id="delivery">₹<%=orders[0].shippingCost%></td>
                                        </tr>
                                        
                                        <tr>
                                            <td><strong>Total:</strong></td>
                                            <td id="total"><strong>₹<%=orders[0].subTotal%></strong></td>
                                        </tr>
                                    </table>
                                   
                                </div>
                                
                            </div>
                            <div class="w-100 d-flex" style="justify-content: end;">
                                <% if (orders[0].orderStatus !== "Cancelled" && orders[0].orderStatus !== "Delivered" && orders[0].orderStatus !== "Returning" && orders[0].orderStatus !== "Returned") { %>
                                    <button class="btn btn-danger mt-3" style="display: inline;" onclick="cancelOrder('<%= orders[0]._id %>')">Cancel Order</button>
                                <% } else if (orders[0].orderStatus === "Delivered") { %>
                                    <button class="btn btn-warning mt-3 text-white" style="display: inline;" onclick="returnOrder('<%= orders[0]._id %>')">Return Order</button>
                                <% } else if(orders[0].orderStatus === "Returning"){ %>
                                    <button class="btn btn-secondary mt-3" style="display: inline;" disabled>Return Request Sent</button>
                                    <% } else if(orders[0].orderStatus === "Returned"){ %>
                                        <button class="btn btn-secondary mt-3" style="display: inline;" disabled>Order Returned</button>
                                <% } else{ %>
                                    <button class="btn btn-secondary mt-3" style="display: inline;" disabled>Order Cancelled</button>
                                    <%}%>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </section>
   
</main>
  
  
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
   
    <link rel="stylesheet" href="/styles/footer.css">
</head>
<body>
    <div class="footer-conatain footer-background">
    <div class="footer contain-width pt-5 pb-5">
        <div class="footer-top row">
        <div class="categories col-lg-4">
            <h6>Categories</h6>
        <ul class="row list-unstyled">
            <div class="col-lg-6">
                  <!-- list -->
            <li><a href="#!" class="text-secondary text-decoration-none">Vegetables & Fruits</a></li>
			<li><a href="#!" class="text-secondary text-decoration-none">Breakfast & instant food</a></li>
			<li><a href="#!" class="text-secondary text-decoration-none">Bakery & Biscuits</a></li>
			<li><a href="#!" class="text-secondary text-decoration-none">Atta, rice & dal</a></li>
			<li><a href="#!" class="text-secondary text-decoration-none">Sauces & spreads</a></li>
			<li><a href="#!" class="text-secondary text-decoration-none">Organic & gourmet</a></li>
			<li><a href="#!" class="text-secondary text-decoration-none">Baby care</a></li>
			<li><a href="#!" class="text-secondary text-decoration-none">Cleaning essentials</a></li>
			<li><a href="#!" class="text-secondary text-decoration-none">Personal care</a></li>
        </div>
        <div class="col-lg-6">
              <!-- list -->
                <li><a href="#!" class="text-secondary text-decoration-none">Dairy, bread & eggs</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Cold drinks & juices</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Tea, coffee & drinks</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Masala, oil & more</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Chicken, meat & fish</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Paan corner</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Pharma & wellness</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Home & office</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Pet care</a></li>
        </div>
        </ul>
    </div>
    <div class="get-to-know-us col-lg-2">
        <h6>Get To Know Us</h6>
        <ul class="list-unstyled">
              <!-- list -->
            <li><a href="#!" class="text-secondary text-decoration-none">Company</a></li>
            <li><a href="#!" class="text-secondary text-decoration-none">About</a></li>
            <li><a href="#!" class="text-secondary text-decoration-none">Blog</a></li>
            <li><a href="#!" class="text-secondary text-decoration-none">Help Center</a></li>
            <li><a href="#!" class="text-secondary text-decoration-none">Our Value</a></li>
        </ul>
    </div>
    <div class="for-consumers col-lg-2">
        <h6>For Consumers</h6>
        <ul class="list-unstyled">
                <!-- list -->
                <li><a href="#!" class="text-secondary text-decoration-none">Payments</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Shipping</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Product Returns</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">FAQ</a></li>
                <li><a href="shop-checkout.html" class="text-secondary text-decoration-none">Shop Checkout</a></li>
            </ul>
        </ul>
    </div>
    <div class="become-shopper col-lg-2">
        <h6>Become a Shopper</h6>
        <ul class="list-unstyled">
                <!-- list -->
                <li><a href="#!" class="text-secondary text-decoration-none">Shopper Opportunities</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Become a Shopper</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Earnings</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Ideas & Guides</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">New Retailers</a></li>
            </ul>
    </div>
    <div class="freshcart-program col-lg-2">
        <h6>Freshcart programs</h6>
        <ul class="list-unstyled">
                <!-- list -->
                <li><a href="#!" class="text-secondary text-decoration-none">Freshcart programs</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Gift Cards</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Promos & Coupons</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Freshcart Ads</a></li>
                <li><a href="#!" class="text-secondary text-decoration-none">Careers</a></li>
            </ul>
    </div>
    </div>
    <hr>
    <div class="footer-bottom">
        <span class="text-sm text-gray-500">
            ©
            <span id="copyright">
                <script>
                    document.getElementById('copyright').appendChild(document.createTextNode(new Date().getFullYear()));
                </script>
            </span>
            FreshKart. All rights reserved.
            
            
        </span>
    </div>
    </div>
</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</body>
</html>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    async function cancelOrder(orderId){
        Swal.fire({
    title: "Are you sure?",
    text: "Do you really want cancel this order",
    icon: "warning",
    showCancelButton: true,
    confirmButtonColor: "#d33",
    cancelButtonColor: "#3085d6",
    confirmButtonText: "Yes, Cancel it!"
  }).then(async (result) => {
    if (result.isConfirmed) {
      // Call the function to delete the wishlist item here
      try{
      await fetch("/order/cancelOrder",{
        method: "PUT",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(
            {orderId:orderId})
      }).then((response) => response.json()) // Convert response to JSON
      .then((data) => {
        console.log(data)
        if (data.redirectTo) {
          window.location.href = data.redirectTo; // Use the correct property
        }
        if(data.status=200&&data.message){
			orderCancelNotification(data.message)
          setTimeout(()=>{
            window.location.href="/account/orders"
          },2000)
        }
        if(data.status=400&&data.error){
			orderCancelNotification(data.error)
        }
      }) 
    }catch(error){
      console.log(error)
    }
    }
  });
}
  async function returnOrder(orderId){

      var returnModal = new bootstrap.Modal(document.getElementById("returnModal"));
      returnModal.show();

    
  }
  document.getElementById("returnForm").addEventListener("submit",sendReturnRequest)

  async function sendReturnRequest(e){
    e.preventDefault()
   
    const orderId= '<%=orders[0]._id%>'
    const returnReason=document.getElementById('returnReason').value
    const additionalDetails=document.getElementById('additionalDetails').value||null
    Swal.fire({
    title: "Are you sure?",
    text: "Do you really want to Return the order",
    icon: "warning",
    showCancelButton: true,
    confirmButtonColor: "#d33",
    cancelButtonColor: "#3085d6",
    confirmButtonText: "Yes, Return it!"
  }).then(async (result) => {
    if (result.isConfirmed) {
        let returnModal =document.getElementById("returnModal");
        returnModal.style.display='none';
      // Call the function to delete the wishlist item here
      try{
      await fetch("/order/returnOrder",{
        method: "PUT",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(
            {orderId:orderId,
            returnReason:returnReason,
            additionalDetails:additionalDetails
            })
      }).then((response) => response.json()) // Convert response to JSON
      .then((data) => {
        console.log(data)
        if (data.redirectTo) {
          window.location.href = data.redirectTo; // Use the correct property
        }
        if(data.status=200&&data.message){
            
			orderReturnNotification(data.message)
          setTimeout(()=>{
            window.location.href="/account/orders"
          },2000)
        }
        if(data.status=400&&data.error){
			orderReturnNotification(data.error)
        }
      }) 
    }catch(error){
      console.log(error)
    }
    }
  });
  }

  async function orderReturnNotification(title){
        Swal.fire({
          title: title,
          icon: "success"
        });
      }
      
      async function orderCancelNotification(title){
        Swal.fire({
          title: title,
          icon: "success"
        });
      }
   
  </script>
<script>
    
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.getElementById("returnForm").addEventListener("submit", function(event) {
      let form = event.target;
      if (!form.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
      }
      form.classList.add("was-validated");
    });
  </script>s=
</body>
</html>

